import{a as B}from"./axios-3342bc3c.js";import{d as F,g as S,t as V,v as N,x as O,a as H,y as P,z as L,A as j,B as J,b as K,C as M,D as q,e as G,c0 as Q,c1 as W,c2 as X,c3 as Y,E as Z,F as ee,h as ne,r as h,H as oe,c4 as te,_ as se,j as o,o as C,k as E,w as n,l as e,n as f,J as ae,K as re,m as ie,L as w,M as le}from"./index-35ea6de4.js";import{T as ce}from"./TimeLine-d1b916f1.js";const de=F({components:{Timeline:ce,IonPage:S,IonHeader:V,IonToolbar:N,IonTitle:O,IonContent:H,IonCard:P,IonCardTitle:L,IonCardHeader:j,IonCardContent:J,IonIcon:K,IonFabButton:M,IonFab:q,IonItem:G,IonItemOption:Q,IonItemOptions:W,IonItemSliding:X,IonAlert:Y,IonRefresher:Z,IonRefresherContent:ee},setup(){const t=ne(),r=[{text:"Sí",role:!0},{text:"No",role:!1}];let d=h(!1),l=h(null),g=h([]);const b=s=>{t.push({name:"EditarUsuario",params:{id:s}})},_=()=>{t.push({name:"AgregarUsuario"})},u=async s=>{d.value=!0,l.value=s},p=async s=>{if(d.value=!1,s.detail.role){let m=localStorage.getItem("token");(await B.delete("/api/user/"+l.value,{headers:{Authorization:"Bearer "+m}})).data.success&&await i()}l.value=null},i=async()=>{let s=localStorage.getItem("token");const c=(await B.get("/api/users",{headers:{Authorization:"Bearer "+s}})).data;c.success&&(g.value=c.data)};return{add:oe,personCircle:te,isOpen:d,idForDelete:l,alertButtons:r,users:g,getUsers:i,ionViewDidEnter:()=>{i()},redirectAddUser:_,redirectEditUser:b,openDeleteAlert:u,logResult:p,handleRefresh:async s=>{await i(),s.target.complete()}}}});function _e(t,r,d,l,g,b){const _=o("ion-title"),u=o("ion-toolbar"),p=o("ion-header"),i=o("ion-refresher-content"),v=o("ion-refresher"),I=o("ion-icon"),s=o("ion-card-title"),m=o("ion-card-header"),c=o("ion-card"),k=o("ion-item"),y=o("ion-item-option"),A=o("ion-item-options"),D=o("ion-item-sliding"),R=o("ion-fab-button"),U=o("ion-fab"),T=o("ion-alert"),x=o("ion-content"),$=o("ion-page");return C(),E($,null,{default:n(()=>[e(p,null,{default:n(()=>[e(u,null,{default:n(()=>[e(_,null,{default:n(()=>[f("Usuarios")]),_:1})]),_:1})]),_:1}),e(x,{fullscreen:!0},{default:n(()=>[e(v,{slot:"fixed",onIonRefresh:r[0]||(r[0]=a=>t.handleRefresh(a))},{default:n(()=>[e(i)]),_:1}),e(p,{collapse:"condense"},{default:n(()=>[e(u,null,{default:n(()=>[e(_,{size:"large"},{default:n(()=>[f("Usuarios")]),_:1})]),_:1})]),_:1}),(C(!0),ae(le,null,re(t.users,a=>(C(),E(D,null,{default:n(()=>[e(k,{lines:"none"},{default:n(()=>[e(c,{style:{width:"100%",margin:"10px 0"}},{default:n(()=>[e(m,null,{default:n(()=>[e(s,{style:{display:"flex","align-items":"center",gap:"8px"}},{default:n(()=>[e(I,{icon:t.personCircle,size:"large"},null,8,["icon"]),ie("span",null,w(a.firstname)+" "+w(a.lastname),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,null,{default:n(()=>[e(y,{onClick:z=>t.redirectEditUser(a._id)},{default:n(()=>[f("Editar")]),_:2},1032,["onClick"]),e(y,{color:"danger",onClick:z=>t.openDeleteAlert(a._id)},{default:n(()=>[f("Eliminar")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(U,{slot:"fixed",vertical:"bottom",horizontal:"end",onClick:r[1]||(r[1]=a=>t.redirectAddUser())},{default:n(()=>[e(R,null,{default:n(()=>[e(I,{icon:t.add},null,8,["icon"])]),_:1})]),_:1}),e(T,{"is-open":t.isOpen,header:"¿Estás seguro de eliminar este usuario?",buttons:t.alertButtons,onDidDismiss:r[2]||(r[2]=a=>t.logResult(a))},null,8,["is-open","buttons"])]),_:1})]),_:1})}const fe=se(de,[["render",_e],["__scopeId","data-v-e2f6e601"]]);export{fe as default};
