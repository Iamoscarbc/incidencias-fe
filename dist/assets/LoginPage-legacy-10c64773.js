System.register(["./index-legacy-056b2097.js","./axios-legacy-9c11ad04.js"],(function(e,a){"use strict";var t,n,o,l,i,s,u,c,d,r,p,m,b,f,g,v,I,x,h,y,w,V,C,_;return{setters:[e=>{t=e.d,n=e.I,o=e.a,l=e.b,i=e.c,s=e.e,u=e.f,c=e.g,d=e.u,r=e.h,p=e.i,m=e.r,b=e.p,f=e._,g=e.j,v=e.o,I=e.k,x=e.w,h=e.l,y=e.m,w=e.n,V=e.q,C=e.s},e=>{_=e.a}],execute:function(){var a=document.createElement("style");a.textContent=".login-container[data-v-1cab09bf]{max-width:300px;margin:32px auto 0;display:flex;flex-direction:column;align-items:center}.login-icon[data-v-1cab09bf]{font-size:60px;color:#6a64ff}.login-title[data-v-1cab09bf]{font-size:24px;margin:10px 0;text-align:center}ion-input[data-v-1cab09bf]{margin:16px 0}ion-button[data-v-1cab09bf]{margin-top:20px;width:100%}\n",document.head.appendChild(a);const k=t({components:{IonButton:n,IonContent:o,IonIcon:l,IonInput:i,IonItem:s,IonList:u,IonPage:c},setup(){const e=d(),a=r();p();const t=m(""),n=m(""),o=m(!1),l=/^\d{8}$/,i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;return localStorage.removeItem("token"),{docnumber:t,password:n,isFormValid:o,login:async()=>{if(o.value)try{let o={docnumber:t.value,password:n.value};const l=(await _.post("/api/auth/login",o)).data;if(l.success){localStorage.setItem("token",l.token);const t=(await _.get("/api/auth/user",{headers:{Authorization:"Bearer "+l.token}})).data;t.success&&(await e.dispatch("usuarios/login",t.user),a.replace({name:"Tab1"}))}}catch(l){console.error("Error en la solicitud:",l)}},updateFormValidity:()=>{o.value=l.test(t.value)&&i.test(n.value)},validateNumber:async e=>{t.value.length>e&&(t.value=t.value.substr(0,e))},personCircleOutline:b}}}),F=e=>(V("data-v-1cab09bf"),e=e(),C(),e),S={class:"login-container"},z=F((()=>y("h2",{class:"login-title"},"Iniciar Sesión",-1))),j=F((()=>y("div",{slot:"label"},"DNI",-1))),B=F((()=>y("div",{slot:"label"},"Contraseña",-1)));e("default",f(k,[["render",function(e,a,t,n,o,l){const i=g("ion-icon"),s=g("ion-input"),u=g("ion-button"),c=g("ion-content"),d=g("ion-page");return v(),I(d,null,{default:x((()=>[h(c,{class:"ion-padding"},{default:x((()=>[y("div",S,[h(i,{class:"login-icon",icon:e.personCircleOutline},null,8,["icon"]),z,h(s,{modelValue:e.docnumber,"onUpdate:modelValue":a[0]||(a[0]=a=>e.docnumber=a),"label-placement":"floating",fill:"outline",onInput:e.updateFormValidity,type:"number",onIonBlur:a[1]||(a[1]=a=>e.validateNumber(8))},{default:x((()=>[j])),_:1},8,["modelValue","onInput"]),h(s,{modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.password=a),"label-placement":"floating",fill:"outline",onInput:e.updateFormValidity,type:"password"},{default:x((()=>[B])),_:1},8,["modelValue","onInput"]),h(u,{expand:"full",onClick:e.login,disabled:!e.isFormValid},{default:x((()=>[w("Iniciar Sesión")])),_:1},8,["onClick","disabled"])])])),_:1})])),_:1})}],["__scopeId","data-v-1cab09bf"]]))}}}));
