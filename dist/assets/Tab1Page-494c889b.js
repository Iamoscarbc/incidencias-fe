import{a as $}from"./axios-f9cbc706.js";import{d as y,g as A,t as V,v as z,x as E,a as F,y as N,z as H,A as P,B as S,b as x,C as L,D as j,E as G,F as J,G as K,h as M,r as q,H as O,_ as Q,j as e,o as c,k as u,w as n,l as o,n as f,J as U,K as W,L as X,M as Y,N as Z}from"./index-2468b0ee.js";import{T as ee}from"./TimeLine-c3a9ef70.js";const ne=y({components:{Timeline:ee,IonPage:A,IonHeader:V,IonToolbar:z,IonTitle:E,IonContent:F,IonCard:N,IonCardTitle:H,IonCardHeader:P,IonCardContent:S,IonIcon:x,IonFabButton:L,IonFab:j,IonRefresher:G,IonRefresherContent:J},computed:{...K("usuarios",["user"])},setup(){const t=M();let s=q([]);const p=a=>{t.push({name:"DetalleIncidencia",params:{id:a}})},m=()=>{t.push({name:"AgregarIncidencia"})},l=async()=>{let a=localStorage.getItem("token");const i=(await $.get("http://206.189.176.12:3002/api/incidences",{headers:{Authorization:"Bearer "+a}})).data;i.success&&(s.value=i.data)};return{incidences:s,redirectDetail:p,redirectAdd:m,handleRefresh:async a=>{await l(),a.target.complete()},ionViewDidEnter:()=>{l()},add:O}}});function oe(t,s,p,m,l,h){const d=e("ion-title"),a=e("ion-toolbar"),_=e("ion-header"),i=e("ion-refresher-content"),I=e("ion-refresher"),b=e("ion-card-title"),g=e("ion-card-header"),C=e("Timeline"),k=e("ion-card-content"),T=e("ion-card"),D=e("ion-icon"),R=e("ion-fab-button"),v=e("ion-fab"),w=e("ion-content"),B=e("ion-page");return c(),u(B,null,{default:n(()=>[o(_,null,{default:n(()=>[o(a,null,{default:n(()=>[o(d,null,{default:n(()=>[f("Incidencias")]),_:1})]),_:1})]),_:1}),o(w,{fullscreen:!0},{default:n(()=>[o(I,{slot:"fixed",onIonRefresh:s[0]||(s[0]=r=>t.handleRefresh(r))},{default:n(()=>[o(i)]),_:1}),o(_,{collapse:"condense"},{default:n(()=>[o(a,null,{default:n(()=>[o(d,{size:"large"},{default:n(()=>[f("Incidencias")]),_:1})]),_:1})]),_:1}),(c(!0),U(Y,null,W(t.incidences,r=>(c(),u(T,{onClick:te=>t.redirectDetail(r._id)},{default:n(()=>[o(g,null,{default:n(()=>[o(b,null,{default:n(()=>[f("Incidencia #"+X(r._id.substr(r._id.length-4,4)),1)]),_:2},1024)]),_:2},1024),o(k,null,{default:n(()=>[o(C,{steps:r.timeline},null,8,["steps"])]),_:2},1024)]),_:2},1032,["onClick"]))),256)),t.user&&t.user.idProfile._id!="653752a46f75ce25da5cb7dd"?(c(),u(v,{key:0,slot:"fixed",vertical:"bottom",horizontal:"end",onClick:s[1]||(s[1]=r=>t.redirectAdd())},{default:n(()=>[o(R,null,{default:n(()=>[o(D,{icon:t.add},null,8,["icon"])]),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1})}const ie=Q(ne,[["render",oe]]);export{ie as default};
