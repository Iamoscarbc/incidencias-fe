System.register(["./index-legacy-b0f9597a.js","./axios-legacy-3c286fdd.js"],(function(e,t){"use strict";var n,a,o,l,i,s,u,d,r,c,p,m,b,g,v,f,I,x,h,y,w,V,C,_;return{setters:[e=>{n=e.d,a=e.I,o=e.a,l=e.b,i=e.c,s=e.e,u=e.f,d=e.g,r=e.u,c=e.h,p=e.i,m=e.r,b=e.p,g=e._,v=e.j,f=e.o,I=e.k,x=e.w,h=e.l,y=e.m,w=e.n,V=e.q,C=e.s},e=>{_=e.a}],execute:function(){var t=document.createElement("style");t.textContent=".login-container[data-v-8bb64489]{max-width:300px;margin:32px auto 0;display:flex;flex-direction:column;align-items:center}.login-icon[data-v-8bb64489]{font-size:60px;color:#6a64ff}.login-title[data-v-8bb64489]{font-size:24px;margin:10px 0;text-align:center}ion-input[data-v-8bb64489]{margin:16px 0}ion-button[data-v-8bb64489]{margin-top:20px;width:100%}\n",document.head.appendChild(t);const k=n({components:{IonButton:a,IonContent:o,IonIcon:l,IonInput:i,IonItem:s,IonList:u,IonPage:d},setup(){const e=r(),t=c();p();const n=m(""),a=m(""),o=m(!1),l=/^\d{8}$/,i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;return localStorage.removeItem("token"),{docnumber:n,password:a,isFormValid:o,login:async()=>{if(o.value)try{let o={docnumber:n.value,password:a.value};const l=(await _.post("http://206.189.176.12:3002/api/auth/login",o)).data;if(l.success){localStorage.setItem("token",l.token);const n=(await _.get("http://206.189.176.12:3002/api/auth/user",{headers:{Authorization:"Bearer "+l.token}})).data;n.success&&(await e.dispatch("usuarios/login",n.user),t.replace({name:"Tab1"}))}}catch(l){console.error("Error en la solicitud:",l)}},updateFormValidity:()=>{o.value=l.test(n.value)&&i.test(a.value)},validateNumber:async e=>{n.value.length>e&&(n.value=n.value.substr(0,e))},personCircleOutline:b}}}),F=e=>(V("data-v-8bb64489"),e=e(),C(),e),S={class:"login-container"},z=F((()=>y("h2",{class:"login-title"},"Iniciar Sesión",-1))),j=F((()=>y("div",{slot:"label"},"DNI",-1))),B=F((()=>y("div",{slot:"label"},"Contraseña",-1)));e("default",g(k,[["render",function(e,t,n,a,o,l){const i=v("ion-icon"),s=v("ion-input"),u=v("ion-button"),d=v("ion-content"),r=v("ion-page");return f(),I(r,null,{default:x((()=>[h(d,{class:"ion-padding"},{default:x((()=>[y("div",S,[h(i,{class:"login-icon",icon:e.personCircleOutline},null,8,["icon"]),z,h(s,{modelValue:e.docnumber,"onUpdate:modelValue":t[0]||(t[0]=t=>e.docnumber=t),"label-placement":"floating",fill:"outline",onInput:e.updateFormValidity,type:"number",onIonBlur:t[1]||(t[1]=t=>e.validateNumber(8))},{default:x((()=>[j])),_:1},8,["modelValue","onInput"]),h(s,{modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),"label-placement":"floating",fill:"outline",onInput:e.updateFormValidity,type:"password"},{default:x((()=>[B])),_:1},8,["modelValue","onInput"]),h(u,{expand:"full",onClick:e.login,disabled:!e.isFormValid},{default:x((()=>[w("Iniciar Sesión")])),_:1},8,["onClick","disabled"])])])),_:1})])),_:1})}],["__scopeId","data-v-8bb64489"]]))}}}));
